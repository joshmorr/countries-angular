<div class="home-container">
  <div class="filters">
    <div class="search-wrapper">
      <svg
        class="search-icon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 20 20"
        fill="currentColor"
        aria-hidden="true"
      >
        <path
          fill-rule="evenodd"
          d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
          clip-rule="evenodd"
        />
      </svg>
      <input
        type="text"
        class="search-input"
        placeholder="Search for a country..."
        [value]="searchTerm()"
        (input)="onSearchChange($any($event.target).value)"
        aria-label="Search for a country"
      />
    </div>

    <select
      class="region-filter"
      [value]="selectedRegion()"
      (change)="onRegionChange($any($event.target).value)"
      aria-label="Filter by region"
    >
      <option value="">Filter by Region</option>
      @for (region of uniqueRegions(); track region) {
        <option [value]="region">{{ region }}</option>
      }
    </select>
  </div>

  @if (countryOverviews()) {
    <div class="countries-grid">
      @for (country of countryOverviews(); track country.cca3) {
        <a
          [routerLink]="getCountryRoute(country)"
          class="country-card"
          [attr.aria-label]="'View details for ' + country.name"
        >
          <img
            [src]="country.flags.png"
            [alt]="country.name.common + ' flag'"
            class="country-flag"
            loading="lazy"
          />
          <div class="country-info">
            <h2 class="country-name">{{ country.name.common }}</h2>
            <div class="country-details">
              <p class="country-detail">
                <span class="detail-label">Population:</span>
                <span class="detail-value">{{ formatPopulation(country.population) }}</span>
              </p>
              <p class="country-detail">
                <span class="detail-label">Region:</span>
                <span class="detail-value">{{ country.region }}</span>
              </p>
              <p class="country-detail">
                <span class="detail-label">Capital:</span>
                <span class="detail-value">{{ country.capital }}</span>
              </p>
            </div>
          </div>
        </a>
      }
    </div>
  } @else if (countryService.countryOverviews.error()) {
    <div class="no-results">
      <p>No countries found. Try adjusting your search or filter.</p>
    </div>
  } @else if (countryService.countryOverviews.isLoading()) {
    <div class="loading">Loading...</div>
  }
</div>
